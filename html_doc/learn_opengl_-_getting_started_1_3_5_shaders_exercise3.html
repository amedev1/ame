<!DOCTYPE html>
<!-- Generated by ame util library - using PrismJS 1.20.0 -->
<html>
<head>
	<meta charset="UTF-8">
	<title>Another Memory Ends</title>
	<link rel="stylesheet" type="text/css" href="../CSS/docgen_style.css">
	<link rel="stylesheet" type="text/css" href="../CSS/prism.css">
</head>
<body>
	<script src="../JS/prism.js">
	</script>
	<h1>1_3_5_shaders_exercise3</h1>
	<br>
	<p></p>
	<br>
	<section class="main">
		<h2 id="learn_opengl_-_getting_started_1_3_5_shaders_exercise3_result">result</h2>
		<img src="../res/1_3_5_shaders_exercise3.gif" alt="result">
		<h2 id="learn_opengl_-_getting_started_1_3_5_shaders_exercise3_source">source</h2>
		<pre><code class="language-c">/*
 * 1_3_5_shaders_exercise3.c
 * Another Memory Ends - amedevcentral@gmail.com
 * Copyright
 * based on LearnOpenGL https://learnopengl.com/Getting-started/Shaders
 * by Joey de Vries https://twitter.com/JoeyDeVriez
 * license https://creativecommons.org/licenses/by-nc/4.0/legalcode
 */
#include "framework.h"

const size_t gc_core_memory_size = 0;

void resize_callback(AmeWindow* window, uint width, uint height);
void input_callback(AmeWindow* window, const InputEvent* event);

int main(int argc, char** argv)
{
	(void)argc;
	(void)argv;
	f_initialize(C_OUTPUT_FULL, 0);

	AmeWindow *window = f_window_create("graphics_1_start_3_5_shaders_exercise3", 800, 600, WINDOW_STYLE_DEFAULT);
	f_window_set_input_callback(window, input_callback);
	f_window_set_resize_callback(window, resize_callback);
	f_window_set_current(window);

	ColorVec4 clear_color = { 0.5f, 0.7f, 0.8f, 1.0f };
	gfx_clear_color_set(clear_color);

	gfx_id shader = gfx_shader_create_from_files("./1_3_5_vertex.glsl", "./1_3_5_fragment.glsl", &gc_gfx_shader_link_default);

	GfxAttributeFormat format = C_GFX_FORMAT_NULL;
	gfx_attribute_add(&format, "pos", GFX_ATTRIBUTE_VEC3);

	gfx_id vertex_array = gfx_vertex_array_create();
	gfx_id vertex_buffer = gfx_vertex_buffer_create();

	gfx_vertex_array_bind(vertex_array);
	gfx_vertex_buffer_bind(vertex_buffer);
	gfx_attributes_enable_interleaved(&format);

	float vertices[] =
	{  0.5f, -0.5f, 0.0f,
		-0.5f, -0.5f, 0.0f,
		 0.0f,  0.5f, 0.0f
	};

	gfx_vertex_buffer_copy_data((const uint8*)vertices, sizeof(vertices), GFX_BUFFER_STATIC);
	gfx_vertex_array_bind(0);

	while (f_window_should_close(window) == false)
	{
		f_window_process_messages(window);
		gfx_framebuffer_bind(0);
		gfx_clear(true, false, false);
		gfx_shader_use(shader);
		gfx_vertex_array_bind(vertex_array);
		gfx_draw_vertices(GFX_VERTEX_TRIANGLE, 3);
		f_window_swap_buffers(window);
	}

	gfx_shader_delete(shader);
	gfx_vertex_array_delete(vertex_array);
	gfx_vertex_buffer_delete(vertex_buffer);

	f_window_delete(window);
	f_terminate();
	return 0;
}

void resize_callback(AmeWindow* window, uint width, uint height)
{
	if (gfx_context_get() == f_window_context(window))
	{
		gfx_viewport_set_values(0, 0, width, height);
	}
}

void input_callback(AmeWindow* window, const InputEvent* event)
{
	switch (event->type)
	{
	case INPUT_EVENT_KEYBOARD_KEY_DOWN:
		if (f_input_event_key(event) == VIRTUAL_KEY_ESC)
			f_window_send_close(window);
	default:
		break;
	}
}</code></pre>
		<h2 id="learn_opengl_-_getting_started_1_3_5_shaders_exercise3_vertex_shader">vertex_shader</h2>
		<pre><code class="language-glsl">#version 330 core
out vec4 color;
in vec3 our_pos;
void main()
{
  color = vec4(our_pos, 1.0);
}</code></pre>
		<h2 id="learn_opengl_-_getting_started_1_3_5_shaders_exercise3_fragment_shader">fragment_shader</h2>
		<pre><code class="language-glsl">#version 330 core
out vec4 color;
in vec3 our_pos;
void main()
{
  color = vec4(our_pos, 1.0);
}</code></pre>
	</section>
	<nav class="menu">
		<a href="../index.html">Home</a>
		<a href="cmake.html">cmake</a>
		<a href="ftest.html">ftest</a>
		<a href="math.html">math</a>
		<a href="core.html">core</a>
		<a href="image.html">image</a>
		<a href="graphics.html">graphics</a>
		<a href="util.html">util</a>
		<a href="framework.html">framework</a>
		<a href="documentation.html">documentation</a>
		<a href="learn_opengl_-_getting_started.html">learn_opengl - getting started</a>
		<a class="section" href="learn_opengl_-_getting_started_1_1_window.html">1_1_window</a>
		<a class="section" href="learn_opengl_-_getting_started_1_2_1_triangle.html">1_2_1_triangle</a>
		<a class="section" href="learn_opengl_-_getting_started_1_2_2_triangle_indexed.html">1_2_2_triangle_indexed</a>
		<a class="section" href="learn_opengl_-_getting_started_1_2_3_triangle_exercise1.html">1_2_3_triangle_exercise1</a>
		<a class="section" href="learn_opengl_-_getting_started_1_2_4_triangle_exercise2.html">1_2_4_triangle_exercise2</a>
		<a class="section" href="learn_opengl_-_getting_started_1_2_5_triangle_exercise3.html">1_2_5_triangle_exercise3</a>
		<a class="section" href="learn_opengl_-_getting_started_1_3_1_shaders_uniform.html">1_3_1_shaders_uniform</a>
		<a class="section" href="learn_opengl_-_getting_started_1_3_2_shaders_interpolation.html">1_3_2_shaders_interpolation</a>
		<a class="section" href="learn_opengl_-_getting_started_1_3_3_shaders_exercise1.html">1_3_3_shaders_exercise1</a>
		<a class="section" href="learn_opengl_-_getting_started_1_3_4_shaders_exercise2.html">1_3_4_shaders_exercise2</a>
		<a class="current_section" href="learn_opengl_-_getting_started_1_3_5_shaders_exercise3.html">1_3_5_shaders_exercise3</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_1_textures.html">1_4_1_textures</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_2_textures_combined.html">1_4_2_textures_combined</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_3_textures_exercise1.html">1_4_3_textures_exercise1</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_4_textures_exercise2.html">1_4_4_textures_exercise2</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_5_textures_exercise3.html">1_4_5_textures_exercise3</a>
		<a class="section" href="learn_opengl_-_getting_started_1_4_6_textures_exercise4.html">1_4_6_textures_exercise4</a>
		<a class="section" href="learn_opengl_-_getting_started_1_5_1_transformations.html">1_5_1_transformations</a>
		<a class="section" href="learn_opengl_-_getting_started_1_5_2_transformations_exercise1.html">1_5_2_transformations_exercise1</a>
		<a class="section" href="learn_opengl_-_getting_started_1_5_3_transformations_exercise2.html">1_5_3_transformations_exercise2</a>
		<a class="section" href="learn_opengl_-_getting_started_1_6_1_coordinate_systems.html">1_6_1_coordinate_systems</a>
		<a class="section" href="learn_opengl_-_getting_started_1_6_2_coordinate_systems_depth.html">1_6_2_coordinate_systems_depth</a>
		<a class="section" href="learn_opengl_-_getting_started_1_6_3_coordinate_systems_multiple.html">1_6_3_coordinate_systems_multiple</a>
		<a class="section" href="learn_opengl_-_getting_started_1_6_4_coordinate_systems_exercise3.html">1_6_4_coordinate_systems_exercise3</a>
		<a class="section" href="learn_opengl_-_getting_started_1_7_1_camera_circle.html">1_7_1_camera_circle</a>
		<a class="section" href="learn_opengl_-_getting_started_1_7_2_camera_keyboard.html">1_7_2_camera_keyboard</a>
		<a class="section" href="learn_opengl_-_getting_started_1_7_3_camera_mouse_zoom.html">1_7_3_camera_mouse_zoom</a>
		<a class="section" href="learn_opengl_-_getting_started_1_7_4_camera_freefly.html">1_7_4_camera_freefly</a>
		<a class="section" href="learn_opengl_-_getting_started_1_7_5_camera_exercise1.html">1_7_5_camera_exercise1</a>
		<a href="learn_opengl_-_lighting.html">learn_opengl - lighting</a>
	</nav>
	<footer>
		<p>Another Memory Ends - Reference</p>
	</footer>
</body>
</html>
